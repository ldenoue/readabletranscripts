{"videoId":"R6F3T3Bykqg","title":"MoA + Groq - The Ultimate LLM Architecture (Tutorial)","description":"Here's how to setup Groq's very own MoA project. \n\nJoin My Newsletter for Regular AI Updates 👇🏼\nhttps://forwardfuture.ai\n\nMy Links 🔗\n👉🏻 Subscribe: https://www.youtube.com/@matthew_berman\n👉🏻 Twitter: https://twitter.com/matthewberman\n👉🏻 Discord: https://discord.gg/xxysSXBxFW\n👉🏻 Patreon: https://patreon.com/MatthewBerman\n👉🏻 Instagram: https://www.instagram.com/matthewberman_ai\n👉🏻 Threads: https://www.threads.net/@matthewberman_ai\n👉🏻 LinkedIn: https://www.linkedin.com/company/forward-future-ai\n\nMedia/Sponsorship Inquiries ✅ \nhttps://bit.ly/44TC45V\n\nLinks:\nhttps://x.com/KapadiaSoami/status/1811657156082712605?t=TVYYMu9pSqeELamR7OyKUg&s=19\nhttps://github.com/skapadia3214/groq-moa","chapters":[],"viewCount":"38749","duration":350,"publishDate":"2024-07-27T07:54:54-07:00","thumbnail":"https://img.youtube.com/vi/R6F3T3Bykqg/mqdefault.jpg","translationLanguages":{"ab":"Abkhazian","aa":"Afar","af":"Afrikaans","ak":"Akan","sq":"Albanian","am":"Amharic","ar":"Arabic","hy":"Armenian","as":"Assamese","ay":"Aymara","az":"Azerbaijani","bn":"Bangla","ba":"Bashkir","eu":"Basque","be":"Belarusian","bho":"Bhojpuri","bs":"Bosnian","br":"Breton","bg":"Bulgarian","my":"Burmese","ca":"Catalan","ceb":"Cebuano","zh-Hans":"Chinese (Simplified)","zh-Hant":"Chinese (Traditional)","co":"Corsican","hr":"Croatian","cs":"Czech","da":"Danish","dv":"Divehi","nl":"Dutch","dz":"Dzongkha","en":"English","eo":"Esperanto","et":"Estonian","ee":"Ewe","fo":"Faroese","fj":"Fijian","fil":"Filipino","fi":"Finnish","fr":"French","gaa":"Ga","gl":"Galician","lg":"Ganda","ka":"Georgian","de":"German","el":"Greek","gn":"Guarani","gu":"Gujarati","ht":"Haitian Creole","ha":"Hausa","haw":"Hawaiian","iw":"Hebrew","hi":"Hindi","hmn":"Hmong","hu":"Hungarian","is":"Icelandic","ig":"Igbo","id":"Indonesian","iu":"Inuktitut","ga":"Irish","it":"Italian","ja":"Japanese","jv":"Javanese","kl":"Kalaallisut","kn":"Kannada","kk":"Kazakh","kha":"Khasi","km":"Khmer","rw":"Kinyarwanda","ko":"Korean","kri":"Krio","ku":"Kurdish","ky":"Kyrgyz","lo":"Lao","la":"Latin","lv":"Latvian","ln":"Lingala","lt":"Lithuanian","lua":"Luba-Lulua","luo":"Luo","lb":"Luxembourgish","mk":"Macedonian","mg":"Malagasy","ms":"Malay","ml":"Malayalam","mt":"Maltese","gv":"Manx","mi":"Māori","mr":"Marathi","mn":"Mongolian","mfe":"Morisyen","ne":"Nepali","new":"Newari","nso":"Northern Sotho","no":"Norwegian","ny":"Nyanja","oc":"Occitan","or":"Odia","om":"Oromo","os":"Ossetic","pam":"Pampanga","ps":"Pashto","fa":"Persian","pl":"Polish","pt":"Portuguese","pt-PT":"Portuguese (Portugal)","pa":"Punjabi","qu":"Quechua","ro":"Romanian","rn":"Rundi","ru":"Russian","sm":"Samoan","sg":"Sango","sa":"Sanskrit","gd":"Scottish Gaelic","sr":"Serbian","crs":"Seselwa Creole French","sn":"Shona","sd":"Sindhi","si":"Sinhala","sk":"Slovak","sl":"Slovenian","so":"Somali","st":"Southern Sotho","es":"Spanish","su":"Sundanese","sw":"Swahili","ss":"Swati","sv":"Swedish","tg":"Tajik","ta":"Tamil","tt":"Tatar","te":"Telugu","th":"Thai","bo":"Tibetan","ti":"Tigrinya","to":"Tongan","ts":"Tsonga","tn":"Tswana","tum":"Tumbuka","tr":"Turkish","tk":"Turkmen","uk":"Ukrainian","ur":"Urdu","ug":"Uyghur","uz":"Uzbek","ve":"Venda","vi":"Vietnamese","war":"Waray","cy":"Welsh","fy":"Western Frisian","wo":"Wolof","xh":"Xhosa","yi":"Yiddish","yo":"Yoruba","zu":"Zulu"},"defaultLanguage":"en","en":{"chunks":[{"text":"so grock just dropped mixture of agents","start":40,"end":4640,"dur":4600},{"text":"natively for those of you who don't","start":2919,"end":6399,"dur":3480},{"text":"remember mixture of Agents allows you to","start":4640,"end":8719,"dur":4078.9999999999995},{"text":"take quote unquote less capable models","start":6399,"end":11160,"dur":4761},{"text":"and make them incredibly capable nearly","start":8719,"end":14559,"dur":5840},{"text":"GPT 40 level and I made an entire video","start":11160,"end":16720,"dur":5560},{"text":"about exactly how it works I'll link","start":14559,"end":18760,"dur":4201},{"text":"that in the description below but today","start":16720,"end":20080,"dur":3360},{"text":"I'm going to show you how to set it all","start":18760,"end":22080,"dur":3320},{"text":"up and it's actually really easy so this","start":20080,"end":23920,"dur":3840},{"text":"video is going to be on the shorter side","start":22080,"end":25359,"dur":3279},{"text":"the only thing you're going to need is","start":23920,"end":28560,"dur":4640},{"text":"VSS code and a grock API key first open","start":25359,"end":31560,"dur":6201},{"text":"up VSS code then you're going to CD into","start":28560,"end":32920,"dur":4360},{"text":"whatever directory you like to store","start":31560,"end":34640,"dur":3080},{"text":"your project so for me when I'm playing","start":32920,"end":35840,"dur":2920},{"text":"around with it I like to go to the","start":34640,"end":37559,"dur":2919},{"text":"desktop now here's the project","start":35840,"end":40079,"dur":4239},{"text":"repository and it was created by Sai","start":37559,"end":42559,"dur":5000},{"text":"from grock so thank you so much to him","start":40079,"end":44239,"dur":4160},{"text":"for putting this together it is so much","start":42559,"end":46399,"dur":3840},{"text":"better than my hacky version that I put","start":44239,"end":48719,"dur":4480},{"text":"together and it comes with an interface","start":46399,"end":51079,"dur":4680},{"text":"so it is especially good so again this","start":48719,"end":53079,"dur":4360},{"text":"is how mixture of Agents Works here's","start":51079,"end":55079,"dur":4000},{"text":"the prompt it goes through multiple","start":53079,"end":56960,"dur":3881},{"text":"agents work together over multiple","start":55079,"end":59359,"dur":4280},{"text":"layers to come up with the best possible","start":56960,"end":62239,"dur":5279},{"text":"output now when I first read this paper","start":59359,"end":64280,"dur":4921},{"text":"what came to mind immediately is it's","start":62239,"end":65760,"dur":3521},{"text":"probably pretty slow and they actually","start":64280,"end":67759,"dur":3479},{"text":"pointed that out in the paper but of","start":65760,"end":70280,"dur":4520},{"text":"course immediately my mind went to Let's","start":67759,"end":72119,"dur":4360},{"text":"power this with grock because then you","start":70280,"end":74920,"dur":4640},{"text":"have the massive speed Advantage so I","start":72119,"end":76640,"dur":4521},{"text":"will drop the link to this in the","start":74920,"end":78799,"dur":3879},{"text":"description below so back to VSS code","start":76640,"end":80159,"dur":3519},{"text":"you're going to type git clone and then","start":78799,"end":82880,"dur":4081.0000000000005},{"text":"the GitHub URL for this project and","start":80159,"end":84439,"dur":4280},{"text":"switching back you can find it right","start":82880,"end":85720,"dur":2840},{"text":"here so if you click this little green","start":84439,"end":88000,"dur":3561},{"text":"code button there's a little copy button","start":85720,"end":90040,"dur":4320},{"text":"right there then you're going to hit","start":88000,"end":93399,"dur":5399},{"text":"enter once that's done let's CD into","start":90040,"end":96119,"dur":6079},{"text":"grock MOA now we're in that project","start":93399,"end":97520,"dur":4121},{"text":"directory next you're going to want to","start":96119,"end":100360,"dur":4241},{"text":"click this explore button open folder go","start":97520,"end":101960,"dur":4440},{"text":"to your desktop and then click that new","start":100360,"end":103880,"dur":3520},{"text":"project that you just downloaded and","start":101960,"end":105719,"dur":3759},{"text":"click open okay now we have it open","start":103880,"end":107439,"dur":3559},{"text":"let's open up the terminal down here","start":105719,"end":108880,"dur":3161},{"text":"again the next thing we're going to do","start":107439,"end":110880,"dur":3441},{"text":"is create a new cond environment so","start":108880,"end":115159,"dur":6279},{"text":"condac create DN gr- MOA python equals","start":110880,"end":117840,"dur":6960},{"text":"3.11 then hit enter hit enter again to","start":115159,"end":119439,"dur":4280},{"text":"confirm and then when it's done you're","start":117840,"end":120880,"dur":3040},{"text":"going to grab this Command right","start":119439,"end":123600,"dur":4161},{"text":"here to activate it copy paste it into","start":120880,"end":125119,"dur":4239},{"text":"terminal and then hit enter and you can","start":123600,"end":127759,"dur":4159},{"text":"see it's active because it says so right","start":125119,"end":130280,"dur":5161},{"text":"there next we need to install all of the","start":127759,"end":132440,"dur":4681},{"text":"dependencies so we're going to type pip","start":130280,"end":136200,"dur":5920},{"text":"install d r requirements.txt then hit","start":132440,"end":138280,"dur":5840},{"text":"enter and I didn't run into a single","start":136200,"end":140280,"dur":4080},{"text":"problem while getting this spun up so","start":138280,"end":142319,"dur":4038.9999999999995},{"text":"hopefully you don't either and it also","start":140280,"end":144120,"dur":3840},{"text":"looks like it comes with a Docker file","start":142319,"end":145640,"dur":3321},{"text":"if you wanted to use that next you're","start":144120,"end":147200,"dur":3080},{"text":"going to right click in this project","start":145640,"end":150879,"dur":5239},{"text":"directory and hit new file and type EnV","start":147200,"end":152680,"dur":5480},{"text":"because we need to set our environment","start":150879,"end":154239,"dur":3360},{"text":"variables from there it's just going to","start":152680,"end":158200,"dur":5520},{"text":"be one line groor aior key equals and","start":154239,"end":159920,"dur":5681},{"text":"then you place your grock API key right","start":158200,"end":161680,"dur":3480},{"text":"here now if you don't already have a","start":159920,"end":163599,"dur":3679},{"text":"grock account go ahead and sign up go to","start":161680,"end":167440,"dur":5760},{"text":"console. gro.com Keys create key we're","start":163599,"end":169800,"dur":6201},{"text":"going to Type M MOA YT so I know it's","start":167440,"end":172200,"dur":4760},{"text":"for YouTube hit enter I am going to","start":169800,"end":173720,"dur":3920},{"text":"revoke this key before publishing the","start":172200,"end":176280,"dur":4080},{"text":"video Let's copy switch back to vs code","start":173720,"end":178400,"dur":4680},{"text":"paste it in and hit save and we're","start":176280,"end":180159,"dur":3879},{"text":"pretty much done so last again get it up","start":178400,"end":181280,"dur":2880},{"text":"and running you're going to type","start":180159,"end":184720,"dur":4561},{"text":"streamlit run app.py and then hit enter","start":181280,"end":186920,"dur":5640},{"text":"all right then it opens up Local Host so","start":184720,"end":188360,"dur":3640},{"text":"this is running locally it'll take a","start":186920,"end":190959,"dur":4038.9999999999995},{"text":"second to spin up and there we go this","start":188360,"end":192959,"dur":4599},{"text":"is the interface so let me give you a","start":190959,"end":194879,"dur":3920},{"text":"demo of it really quickly so on the left","start":192959,"end":196319,"dur":3360},{"text":"side this is where we can have all of","start":194879,"end":198599,"dur":3720},{"text":"our settings and we can select our main","start":196319,"end":200239,"dur":3920},{"text":"model and we probably want the most","start":198599,"end":202400,"dur":3801},{"text":"capable model so right now llama 370b","start":200239,"end":205280,"dur":5041},{"text":"sounds good we can actually subtract and","start":202400,"end":207200,"dur":4800},{"text":"add number of layers so you can","start":205280,"end":208799,"dur":3519},{"text":"experiment with the number of layers","start":207200,"end":210560,"dur":3360},{"text":"that works best for your use case now","start":208799,"end":212760,"dur":3961},{"text":"according to the paper three layers","start":210560,"end":214319,"dur":3759},{"text":"seems to be optimal and that is the","start":212760,"end":215599,"dur":2839},{"text":"default for this project so we're going","start":214319,"end":216840,"dur":2521},{"text":"to leave it at three but of course if","start":215599,"end":218159,"dur":2560},{"text":"you want to play around with it and","start":216840,"end":219599,"dur":2759},{"text":"experiment see what works for you please","start":218159,"end":221239,"dur":3080},{"text":"do then we have the main model","start":219599,"end":222959,"dur":3360},{"text":"temperature I am going to leave it where","start":221239,"end":224680,"dur":3441},{"text":"it is but again something else you can","start":222959,"end":226920,"dur":3961},{"text":"experiment with and here is where we can","start":224680,"end":228920,"dur":4240},{"text":"actually customize the agents for each","start":226920,"end":230799,"dur":3879},{"text":"layer so we have layer agent one layer","start":228920,"end":232480,"dur":3560},{"text":"agent 2 and layer agent three we're","start":230799,"end":235799,"dur":5000},{"text":"going to be using Lama 38b Gemma 7B and","start":232480,"end":238360,"dur":5880},{"text":"then llama 38b again and of course grock","start":235799,"end":239480,"dur":3681},{"text":"has other models that you can play","start":238360,"end":241640,"dur":3280},{"text":"around with and you would just change","start":239480,"end":243599,"dur":4119},{"text":"the model name right there and you can","start":241640,"end":245519,"dur":3879},{"text":"also change the temperature and other","start":243599,"end":248760,"dur":5161},{"text":"settings as you see fit so with that set","start":245519,"end":251400,"dur":5881},{"text":"let's give it a try write 10 sentences","start":248760,"end":253360,"dur":4600},{"text":"that end with the word Apple now it is","start":251400,"end":254840,"dur":3440},{"text":"going through multiple layers with","start":253360,"end":257680,"dur":4320},{"text":"multiple agents but still look how fast","start":254840,"end":259199,"dur":4359},{"text":"that is and the cool thing is you can","start":257680,"end":261639,"dur":3959},{"text":"actually dig into each layer and each","start":259199,"end":263759,"dur":4560},{"text":"agent to see what they've done so here's","start":261639,"end":266840,"dur":5201},{"text":"layer 1 agent one here's the output and","start":263759,"end":269880,"dur":6121},{"text":"it looks like layer 1 agent one actually","start":266840,"end":271639,"dur":4799},{"text":"got it right out of the box layer","start":269880,"end":274280,"dur":4400},{"text":"One agent two thought and response so","start":271639,"end":276880,"dur":5241},{"text":"that is a really poor response and that","start":274280,"end":278880,"dur":4600},{"text":"just happens to be Gemma and then agent","start":276880,"end":280919,"dur":4038.9999999999995},{"text":"three looks like it almost got it right","start":278880,"end":283160,"dur":4280},{"text":"but here's one sentence that it did not","start":280919,"end":284840,"dur":3921},{"text":"so you can see that was layer one now we","start":283160,"end":286560,"dur":3400},{"text":"have layer two of the three agents and","start":284840,"end":288960,"dur":4120},{"text":"layer three and then at the end of it we","start":286560,"end":291960,"dur":5400},{"text":"have llama 370b putting it all together","start":288960,"end":294280,"dur":5320},{"text":"and it got the right answer and it was","start":291960,"end":296600,"dur":4640},{"text":"super fast too so really cool project","start":294280,"end":298360,"dur":4080},{"text":"out of Gro thank you for making mixture","start":296600,"end":300520,"dur":3920},{"text":"of Agents native to Gro now I actually","start":298360,"end":301919,"dur":3559},{"text":"hope they build this into the main","start":300520,"end":303919,"dur":3399},{"text":"interface as an option and I hope","start":301919,"end":305600,"dur":3681},{"text":"inference companies actually start","start":303919,"end":307280,"dur":3361},{"text":"building a lot of these types of things","start":305600,"end":309800,"dur":4200},{"text":"mixture of Agents route llm Chain of","start":307280,"end":311840,"dur":4560},{"text":"Thought all of these things should be","start":309800,"end":314880,"dur":5080},{"text":"built into the inference interface so a","start":311840,"end":316880,"dur":5040},{"text":"couple last things up in the top right","start":314880,"end":318680,"dur":3800},{"text":"we have a deploy button if you wanted to","start":316880,"end":320880,"dur":4000},{"text":"deploy this with streamlit makes it very","start":318680,"end":323120,"dur":4440},{"text":"easy we also under the three dots have","start":320880,"end":325479,"dur":4599},{"text":"rerun which we can do just like that we","start":323120,"end":328080,"dur":4960},{"text":"also have different settings so run on","start":325479,"end":331080,"dur":5601},{"text":"Save wide mode and the app Theme you","start":328080,"end":333360,"dur":5280},{"text":"can print you can record a screencast","start":331080,"end":335319,"dur":4239},{"text":"which I wasn't expecting to be in here","start":333360,"end":337360,"dur":4000},{"text":"and you can also clear the cash so a lot","start":335319,"end":339600,"dur":4281},{"text":"of cool things I have a feeling this","start":337360,"end":342160,"dur":4800},{"text":"project is going to evolve quite a bit","start":339600,"end":344080,"dur":4480},{"text":"so I'm really excited to see it so check","start":342160,"end":345400,"dur":3240},{"text":"it out I'll drop all the links in the","start":344080,"end":346880,"dur":2800},{"text":"description below if you liked this","start":345400,"end":348319,"dur":2919},{"text":"video please consider giving a like And","start":346880,"end":349720,"dur":2840},{"text":"subscribe and I'll see you in the next","start":348319,"end":351960,"dur":3641},{"text":"one","start":349720,"end":351960,"dur":2240}],"vocabulary":"MoA, Groq, LLM, Matthew Berman, Forward Future, Kapadia Soami ","summary":"This video tutorial demonstrates setting up and using Grock's Mixture of Agents (MoA) feature.  Matthew Berman shows how to use VSS code, a Grock API key, and the Grock MOA project repository to run multiple LLM agents (like Llama 38B and Gemma 7B) in sequence to improve output quality and speed.  The video explains the setup process, including environment variable configuration, and demonstrates a sample prompt.  The result is a faster and more capable model that can be deployed using Streamlit.\n","punctuatedText":"So, Groq just released a Mixture of Agents (MoA) natively. For those of you who don't remember, Mixture of Agents allows you to take, quote-unquote, less capable models and make them incredibly capable, nearly GPT-4 level. I made a whole video about exactly how it works; I'll link that in the description below. But today, I'm going to show you how to set it all up, and it's actually really easy. This video will be on the shorter side.\n\nThe only thing you'll need is VS Code and a Groq API key.\n\nFirst, open up VS Code. Then, change the directory to wherever you like to store your project. For me, I like to use the desktop. Here's the project repository. It was created by Sai from Groq, so thank you so much to him for putting this together. It's much better than my hacky version that I put together, and it comes with an interface, so it's especially good.\n\nAgain, this is how Mixture of Agents works. Here's the prompt. It goes through multiple agents working together over multiple layers to come up with the best possible output.\n\nWhen I first read this paper, what immediately came to mind was that it's probably pretty slow.  They actually pointed that out in the paper. But of course, my mind immediately went to, \"Let's power this with Groq,\" because then you have the massive speed advantage.\n\nI will drop the link to this in the description below.\n\nBack to VS Code. Type `git clone` followed by the GitHub URL for this project. Switching back, you can find it right here. If you click this little green code button, there's a little copy button right there. Then hit Enter. Once that's done, `cd` into the Groq MoA directory. Now, you're in that project directory.\n\nNext, you'll want to click the \"Explore\" button, open the folder, go to your desktop, and then click the new project you just downloaded and click \"Open.\" Okay, now we have it open.\n\nLet's open up the terminal down here.  The next thing we're going to do is create a new conda environment:\n\n`conda create -n groq-MoA python=3.11`\n\nThen hit Enter. Hit Enter again to confirm.\n\nThen, when it's done, you're going to grab this command right here to activate it. Copy and paste it into the terminal, and then hit Enter. You can see it's active because it says so right there.\n\nNext, we need to install all the dependencies:\n\n`pip install -r requirements.txt`\n\nThen hit Enter.\n\nI didn't run into a single problem while getting this set up, so hopefully, you don't either.  It also appears to include a Dockerfile for use. Next, right-click in this project directory, create a new file, and name it `.env` to set environment variables.  .  It's just going to be one line: GROQ_API_KEY= and then place your Groq API key right here.\n\nNow, if you don't already have a Groq account, go ahead and sign up. Go to console.groq.com.  Keys. Create a key. We're going to type MOA_YT, so I know it's for YouTube. Hit enter. I am going to revoke this key before publishing the video.\n\nLet's copy it, switch back to VS Code, paste it in, and hit save. We're pretty much done.\n\nSo, last, to get it up and running, type streamlit run app.py and then hit enter.\n\nAll right, then it opens up localhost.  So, this is running locally. It'll take a second to spin up. And there we go. This is the interface.\n\nLet me give you a demo of it really quickly. On the left side, this is where we can have all of our settings and we can select our main model. We probably want the most capable model. So, right now, Llama 370b sounds good.\n\nWe can actually subtract and add the number of layers. So, you can experiment with the number of layers that work best for your use case. Now, according to the paper, three layers seem to be optimal, and that is the default for this project. So, we're going to leave it at three. But, of course, if you want to play around with it and experiment, see what works for you, please do.\n\nThen we have the main model temperature. I am going to leave it where it is, but again, something else you can experiment with. And here is where we can actually customize the agents for each layer.  So, we have Layer Agent 1, Layer Agent 2, and Layer Agent 3. We're going to be using Llama 38b, Gemma 7B, and then Llama 38b again. And of course, Groq has other models that you can play around with, and you would just change the model name right there. And you can also change the temperature and other settings as you see fit.\n\nWith that set, let's give it a try. Write 10 sentences that end with the word apple.\n\nNow, it is going through multiple layers with multiple agents, but still look how fast that is. And the cool thing is you can actually dig into each layer and each agent to see what they've done.\n\nSo, here's Layer 1, Agent 1. Here's the output. And it looks like Layer 1, Agent 1, actually got it right out of the box. Layer 1, Agent 2, thought and response. So, that is a really poor response, and that just happens to be Gemma.  And then, Agent 3 looks like it almost got it right, but here's one sentence that it did not.\n\nSo, you can see that was Layer 1.  Now we have Layer 2 of the three agents, and Layer 3. At the end, we have Llama 370b. Putting it all together, it got the right answer and was super fast too.  . So, a really cool project out of Groq. Thank you for making a mixture of agents native to Groq. Now, I actually hope they build this into the main interface as an option, and I hope inference companies actually start building a lot of these types of things: a mixture of agents, the route LLM, Chain of Thought, all of these things should be built into the inference interface.\n\nA couple of last things.  Up in the top right, we have a deploy button if you wanted to deploy this with Streamlit.  It makes it very easy. We also have, under the three dots, a rerun option, which we can do just like that. We also have different settings: run on save, wide mode, and the app theme. You can print, you can record a screencast, which I wasn't expecting to be in here, and you can also clear the cache. So, a lot of cool things. I have a feeling this project is going to evolve quite a bit, so I'm really excited to see it. So, check it out.  I'll drop all the links in the description below. If you liked this video, please consider giving it a like and subscribing. I'll see you in the next one.\n"}}